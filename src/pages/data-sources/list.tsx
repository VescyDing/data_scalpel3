import { dataSources, catalogs } from '@/services/ant-design-pro/api_v1';
import { PlusOutlined, EditOutlined, DeleteOutlined, CheckCircleOutlined, CloseCircleOutlined, ExclamationCircleOutlined, } from '@ant-design/icons';
import type { ActionType, ProColumns, ProDescriptionsItemProps } from '@ant-design/pro-components';
import {
  FooterToolbar,
  ModalForm,
  PageContainer,
  ProDescriptions,
  ProFormText,
  ProFormTextArea,
  ProTable,
  ProFormCheckbox,
  ProFormSelect,
  StepsForm,
} from '@ant-design/pro-components';
import { FormattedMessage, useIntl } from '@umijs/max';
import { Button, Drawer, Input, message, Tag, Switch, Modal, Layout } from 'antd';
import React, { useRef, useState, useEffect } from 'react';
import _ from 'lodash'
import SearchTree from '@/components/SearchTree';

/**
 * @en-US Add node
 * @zh-CN 添加节点
 * @param fields
 */
const handleAdd = async (fields: API.RuleListItem) => {
  const hide = message.loading('正在添加');
  try {
    await dataSources.post(fields);
    hide();
    message.success('添加成功');
    return true;
  } catch (error) {
    return false;
  }
};

/**
 * @en-US Update node
 * @zh-CN 更新节点
 *
 * @param fields
 */
const handleUpdate = async (fields: FormValueType) => {
  const hide = message.loading('正在更新');
  try {
    await dataSources.put(fields);
    hide();
    message.success('更新成功');
    return true;
  } catch (error) {
    return false;
  }
};

/**
 *  Delete node
 * @zh-CN 删除节点
 *
 * @param selectedRows
 */
const handleRemove = async (selectedRows: API.RuleListItem[]) => {
  const hide = message.loading('正在删除');
  if (!selectedRows) return true;
  try {
    const requests = selectedRows.map(({ id }) => dataSources.delete({ id }))
    await Promise.all(requests)
    hide();
    message.success('删除成功');
    return true;
  } catch (error) {
    return false;
  }
};

const TableList: React.FC = () => {
  /**
   * @en-US Pop-up window of new window
   * @zh-CN 新建窗口的弹窗
   *  */
  const [createModalOpen, handleModalOpen] = useState<boolean>(false);
  const [action_modal_1, _action_modal_1] = useState<boolean>(false);

  /**
   * @en-US The pop-up window of the distribution update window
   * @zh-CN 分布更新窗口的弹窗
   * */
  const [showDetail, setShowDetail] = useState<boolean>(false);

  const actionRef = useRef<ActionType>();
  const [currentRow, setCurrentRow] = useState<API.RuleListItem>({});
  const [selectedRowsState, setSelectedRows] = useState<API.RuleListItem[]>([]);

  const [catalogsTree, _catalogsTree] = useState([]);
  const [params, _params] = useState({});


  useEffect(() => {
    if (!createModalOpen) {
      setCurrentRow({});
    }
  }, [createModalOpen])

  const transTreeData: any = (nodes: any[]) => nodes.map((item: any) => ({
    ...item,
    key: item.id,
    title: item.name,
    children: item.children && item.children.length > 0 ? transTreeData(item.children) : [],
  }))

  useEffect(() => {
    catalogs.get({
      type: 'DATASOURCE',
      tree: true
    }).then((res) => {
      _catalogsTree(transTreeData(res.data) as [])
    })
  }, [])

  const dict_state = {
    'OK': <Tag icon={<CheckCircleOutlined />} color="success">
      可用
    </Tag>,
    'WARN': <Tag icon={<ExclamationCircleOutlined />} color="warning">
      异常
    </Tag>,
    'ERROR': <Tag icon={<CloseCircleOutlined />} color="error">
      错误
    </Tag>
  }

  const dict_type = {
    'JDBC': <svg t="1724845359863" class="icon" viewBox="0 0 3039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3299" style={{ height: '26px', transform: 'translateY(5px)' }} ><path d="M1787.782883 446.677898a174.467612 174.467612 0 0 0 90.090586-23.874516v72.439769a239.35732 239.35732 0 0 1-105.394762 19.89543q-83.662831 0-132.840252-50.095672t-49.177421-133.554446q0-87.845973 54.89098-143.655204t141.716674-55.80923a254.528861 254.528861 0 0 1 90.804781 14.079843v76.316826a164.754561 164.754561 0 0 0-85.091222-22.038014 113.648815 113.648815 0 0 0-86.825694 34.689467 127.463385 127.463385 0 0 0-32.546882 90.600725 123.933221 123.933221 0 0 0 30.914436 87.845973 108.220933 108.220933 0 0 0 83.458776 33.159049z m-260.273028-108.047486a81.622275 81.622275 0 0 1 23.772488 59.992372 98.854777 98.854777 0 0 1-35.913801 80.295912q-35.811773 29.690102-98.048758 29.690103h-138.451783v-370.361071h131.51389c40.403026 0 71.41949 7.652088 93.253449 22.956264a73.460047 73.460047 0 0 1 32.750937 63.563347 76.602505 76.602505 0 0 1-20.30354 52.850422 104.4357 104.4357 0 0 1-51.11595 31.322548v1.020279a103.180758 103.180758 0 0 1 62.543068 28.669824z m-136.207171-141.614647h-33.465132v91.621004h37.546246a64.950925 64.950925 0 0 0 42.545611-12.855509 44.677993 44.677993 0 0 0 15.508232-36.117856c0-28.36374-20.711652-42.647638-62.134957-42.647639z m60.196428 164.060772a76.43926 76.43926 0 0 0-47.544975-12.855508h-46.116585v101.619732h46.83078a71.878616 71.878616 0 0 0 46.728752-13.875787 47.320514 47.320514 0 0 0 16.834594-38.566525 43.127169 43.127169 0 0 0-16.732566-36.321912z m-432.802111 147.532262h-127.432776v-370.361071h127.942915q197.270835 0 197.219821 180.487254 0 85.85643-55.197063 137.941644-55.248077 51.881158-142.532897 51.932173z m81.316191-274.86301a123.239432 123.239432 0 0 0-87.02975-30.914437h-42.851695v241.29585h43.05575c37.444218 0 66.930265-11.223063 88.254085-33.567161s32.036743-52.442311 32.036742-90.600725c0-36.832051-11.121035-65.501875-33.465132-86.213527z m-421.579048 281.392792a139.900579 139.900579 0 0 1-51.932173-9.590618v-74.378297a75.674051 75.674051 0 0 0 46.932808 15.508232q56.931537 0 56.931537-86.315556V138.247728h78.867523V363.219122q0 73.460047-33.873244 112.638739-33.82223 39.382747-96.926451 39.28072z m-127.942916-30.506326c0 67.64446-109.679931 122.433412-244.866824 122.433412s-244.866824-54.788952-244.866823-122.433412a67.787299 67.787299 0 0 1 1.020278-10.202784h-1.020278v-346.894667h3.673002c19.487318-57.849787 119.882716-102.027843 241.193821-102.027843s221.706503 44.178056 241.193822 102.027843h3.673002v346.894667h-1.020278a67.787299 67.787299 0 0 1 1.020278 10.202784z m-249.968216-408.111373c-98.558897 0-178.548726 29.690102-178.548725 66.318099s79.989829 66.318098 178.548725 66.318098 178.548726-29.690102 178.548726-66.318098-79.989829-66.318098-178.548726-66.318099z m178.548726 157.837074a396.969932 396.969932 0 0 1-173.447334 36.015829c-73.255991 0-138.757867-16.120399-183.650117-41.62736v31.424575h0.714194c7.039921 34.281355 83.866887 61.216706 177.834531 61.216706s170.79461-26.935351 177.834531-61.216706h0.714195v-25.813044z m0 112.230627a396.969932 396.969932 0 0 1-173.447334 36.015829c-73.255991 0-138.757867-16.120399-183.650117-41.62736v31.424576h0.714194c7.039921 34.281355 83.866887 61.216706 177.834531 61.216706s170.79461-26.935351 177.834531-61.216706h0.714195v-25.813045z m0 112.230628a396.969932 396.969932 0 0 1-173.447334 36.015829c-73.255991 0-138.757867-16.120399-183.650117-41.62736v21.221791h0.714194a21.956392 21.956392 0 0 0-0.714194 5.101392c0 36.627996 79.989829 66.318098 178.548725 66.318098s178.548726-29.690102 178.548726-66.318098a21.956392 21.956392 0 0 0-0.714195-5.101392h0.714195v-15.61026z" p-id="3300"></path></svg>,
    'KAFKA': <svg t="1724845454968" class="icon" viewBox="0 0 1956 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5157" style={{ height: '26px', transform: 'translateY(5px)' }} ><path d="M209.365605 138.272611c-71.745223 38.481529-71.092994 138.924841 1.304459 178.058599 22.175796 11.740127 24.132484 15.653503 24.132484 40.438217 0 22.828025-1.956688 28.04586-11.740128 28.04586-17.610191 0-64.570701 35.872611-79.571974 60.005095-16.957962 28.698089-22.175796 68.484076-13.044586 103.704459 9.783439 35.220382 54.135032 82.180892 84.137579 88.050955 18.91465 3.913376 20.219108 5.870064 20.219109 32.611465 0 23.480255-2.608917 28.698089-14.349045 31.959236-56.09172 16.957962-83.48535 101.095541-49.569427 151.317197 16.305732 24.132484 58.700637 47.612739 85.442039 47.612739 54.135032 0 102.4-48.264968 102.4-102.4 0-43.699363-27.393631-85.442038-63.266242-96.529936-12.392357-3.261146-15.001274-8.478981-15.001274-32.611465 0-23.480255 1.956688-28.698089 15.001274-31.959236 8.478981-1.956688 26.741401-11.087898 40.438216-20.871337 24.132484-16.305732 26.089172-16.305732 46.96051-6.522293 20.219108 9.783439 21.523567 12.392357 21.523567 41.090445 0 82.833121 82.180892 131.750318 152.621656 91.312102 65.22293-37.17707 66.527389-135.011465 2.608917-174.145223-28.698089-17.610191-77.615287-16.957962-109.574522 0.65223-22.175796 12.392357-25.436943 13.044586-43.699363 3.913376-18.26242-9.783439-18.91465-11.087898-18.262421-60.005096 0-48.264968 0.652229-50.873885 18.91465-60.005096 17.610191-9.13121 20.871338-8.478981 43.047134 3.913376 29.350318 16.305732 76.963057 18.26242 104.356687 3.913376 30.002548-15.653503 52.178344-53.482803 52.178344-88.050955 0-80.876433-82.180892-129.141401-153.273885-89.355414-31.959236 17.610191-48.917197 49.569427-48.917197 91.312102 0 28.698089-1.304459 31.307006-22.175797 41.090445-21.523567 10.435669-22.828025 10.435669-43.699363-5.870063-12.392357-9.13121-30.002548-18.91465-39.785987-20.871338-16.305732-3.913376-18.26242-7.826752-18.26242-32.611465 0-24.132484 2.608917-29.350318 15.001274-32.611465 54.787261-16.957962 82.180892-97.834395 48.917197-146.751592-34.568153-50.221656-85.442038-64.570701-135.011465-37.8293zM293.503185 200.234395c35.872611 45.656051-27.393631 98.486624-68.484077 57.396178-19.566879-19.566879-20.219108-35.220382-2.608917-58.048407 18.91465-23.480255 52.178344-23.480255 71.092994 0.652229z m254.369426 151.317197c15.653503 37.829299-17.610191 74.35414-56.743949 61.309554-27.393631-9.13121-39.133758-33.915924-28.698089-59.352866 15.653503-37.17707 69.788535-38.481529 85.442038-1.956688zM303.938854 465.69172c28.04586 28.04586 30.002548 58.700637 5.217834 88.050955C266.761783 603.964331 189.146497 575.266242 189.146497 508.738854c0-30.654777 35.872611-65.22293 68.484076-65.22293 18.91465 0 29.350318 5.217834 46.308281 22.175796z m234.150318 157.187261c9.13121 8.478981 16.305732 20.219108 16.305732 25.436943 0 35.220382-37.829299 62.614013-67.831847 48.917197-15.653503-7.174522-30.002548-30.654777-30.002547-48.917197 0-15.653503 30.654777-41.742675 48.917197-41.742676 9.13121 0 24.132484 7.174522 32.611465 16.305733z m-247.847134 143.490446c19.566879 19.566879 20.219108 35.220382 2.608917 58.048407-18.26242 23.480255-52.178344 23.480255-70.440764 0-7.826752-9.783439-13.696815-22.828025-13.696815-30.002547 0-17.610191 29.350318-44.351592 48.917197-44.351593 9.13121 0 24.132484 7.174522 32.611465 16.305733zM760.499363 363.29172c-1.956688 2.608917-3.913376 69.788535-3.913376 150.012739V658.751592h52.178344l0.65223-37.829299c0.652229-20.219108 1.304459-42.394904 1.304458-48.917197 0-19.566879 7.826752-12.392357 43.047134 37.829299 33.915924 48.264968 34.568153 48.917197 63.266242 48.917197 15.653503 0 28.698089-1.956688 28.698089-5.217834 0-2.608917-18.91465-29.350318-42.394904-59.352866-46.96051-61.961783-47.612739-52.830573 6.522293-110.226752 17.610191-18.91465 33.915924-37.829299 34.568152-41.090446 1.304459-3.261146-11.087898-5.870064-26.741401-5.870063-28.04586 0-31.307006 1.956688-63.918471 39.133758-18.91465 21.523567-35.872611 39.133758-38.481529 39.133757-2.608917 0-5.217834-32.611465-5.870063-72.397452-0.652229-39.785987-1.956688-75.006369-3.913376-77.615286-3.261146-5.870064-39.785987-7.174522-45.003822-1.956688zM1296.631847 363.29172c-14.349045 3.913376-31.307006 30.002548-32.611465 51.526114-1.304459 11.087898-7.174522 18.91465-16.305732 22.828026-19.566879 7.174522-20.871338 37.829299-1.956688 43.047134 11.740127 3.261146 13.044586 9.13121 13.696815 79.571974 0.652229 41.742675 1.304459 80.224204 1.956688 85.442038 0.652229 6.522293 9.783439 10.435669 28.698089 11.740128l27.393631 1.956688V482.649682h16.305732c14.349045 0 16.305732-2.608917 16.305733-22.828026s-1.956688-22.828025-16.305733-22.828025c-13.044586 0-16.305732-3.261146-16.305732-16.305733 0-11.740127 4.565605-16.957962 16.305732-20.219108 12.392357-3.261146 16.305732-8.478981 16.305733-22.828026 0-16.957962-1.956688-18.91465-20.871338-18.26242-11.740127 0.652229-26.741401 1.956688-32.611465 3.913376zM1393.814013 362.63949c-2.608917 2.608917-4.565605 70.440764-4.565605 150.664969V658.751592h52.178344V552.438217l37.829299 52.830573 37.17707 52.830573 31.959236 0.652229h31.307006l-15.653503-21.523567C1504.040764 557.656051 1493.605096 542.654777 1493.605096 538.089172c0-2.608917 19.566879-26.089172 43.699363-51.526115l44.351592-46.30828-30.654777-1.956688c-28.698089-1.956688-30.654777-0.652229-67.831847 38.481529l-38.481529 39.785987-3.261146-76.963057-3.261147-77.615287-19.566879-1.956688c-11.087898-1.304459-22.175796 0-24.784713 2.608917zM1033.783439 440.254777c-43.699363 15.653503-75.006369 62.614013-75.006369 111.53121 0 41.742675 33.263694 93.921019 69.788535 107.617835 27.393631 10.435669 75.006369 6.522293 98.486624-7.174523 16.957962-10.435669 20.871338-11.087898 20.871338-3.261146 0 7.174522 7.174522 9.783439 26.089172 9.783439h26.089172V436.993631h-26.089172c-22.175796 0-26.089172 1.956688-26.089172 13.044586 0 13.696815 0 13.696815-18.262421 0-24.132484-18.26242-63.266242-22.175796-95.877707-9.78344z m95.225478 62.614013c26.089172 28.04586 26.089172 62.614013 0 91.964331-16.305732 18.26242-23.480255 21.523567-49.569427 21.523567-40.438217 0-61.961783-22.828025-61.961783-65.875159 0-62.614013 69.788535-92.616561 111.53121-47.612739z" fill="#2c2c2c" p-id="5158"></path><path d="M1669.054777 436.993631c-89.355414 26.741401-106.965605 168.927389-26.089172 213.93121 33.915924 18.91465 90.007643 19.566879 113.487898 1.304458 19.566879-15.653503 26.741401-16.305732 21.523567-3.261146-2.608917 7.826752 2.608917 9.783439 25.436943 9.783439h29.350318V436.993631h-26.089172c-21.523567 0-26.089172 1.956688-26.089172 13.044586 0 7.174522-2.608917 13.044586-6.522293 13.044586-3.261146 0-6.522293-2.608917-6.522293-5.870064 0-7.826752-48.917197-26.741401-67.179618-26.089172-7.826752 0-22.175796 2.608917-31.307006 5.870064z m86.746497 64.5707c16.957962 15.001274 21.523567 24.132484 21.523567 44.351593 0 67.831847-74.35414 97.834395-116.749045 46.960509-54.787261-64.570701 31.959236-148.056051 95.225478-91.312102z" fill="#2c2c2c" p-id="5159"></path></svg>,
    'S3': <svg t="1724846044991" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="68254" style={{ height: '26px', transform: 'translateY(5px)' }} ><path d="M961.99624971 961.99250029h-884.98524991a14.99974981 14.99974981 0 0 1-14.9997498-14.9997498v-869.98550098a14.99974981 14.99974981 0 0 1 14.9997498-14.9997498h884.98524991v899.98500058zM681.81591992 633.22047969a44.90175146 44.90175146 0 0 0-32.4969583 11.94730049 44.05426612 44.05426612 0 0 0-12.03729961 32.18946415 44.57175732 44.57175732 0 0 0 11.9998002 32.39195977 44.51925762 44.51925762 0 0 0 32.38446006 11.9998002 44.62425615 44.62425615 0 0 0 32.42945918-12.26979581 44.60925674 44.60925674 0 0 0 12.26229609-32.42195947 43.64177256 43.64177256 0 0 0-12.04479932-31.95696709 45.08174883 45.08174883 0 0 0-32.4969583-11.87230253z m-173.32211162 19.57467393c8.87235205 0 12.82478643 2.91745107 12.82478643 9.44984266v3.10494815c-9.87733565 0.2699956-13.79226972 0.40499297-19.03468272 0.93748448a55.82156924 55.82156924 0 0 0-28.08703212 8.77485322 22.77712002 22.77712002 0 0 0-9.85483565 19.70967129 24.38959395 24.38959395 0 0 0 7.43237578 18.35219443 32.89445156 32.89445156 0 0 0 23.33961123 7.42487608 39.34434463 39.34434463 0 0 0 26.20456348-8.10736436v6.2248957h26.18206347a155.11991484 155.11991484 0 0 1-0.94498417-19.16968008V663.03998281a24.50209131 24.50209131 0 0 0-12.41979258-24.29959482 58.69402207 58.69402207 0 0 0-24.98208398-4.72492177 51.66663925 51.66663925 0 0 0-30.36699405 7.68737196 28.95701748 28.95701748 0 0 0-11.33981103 16.34222813l25.78457021 4.18492968c2.0249666-6.59988984 6.59239013-9.42734268 15.2622457-9.42734266z m67.63387324 65.87890224h33.7494375a167.24721269 167.24721269 0 0 1 20.52715781 0.94498417V695.43944229a175.21957969 175.21957969 0 0 1-20.39216044 0.94498505h-14.70725508a35.2494123 35.2494123 0 0 0-4.04993232 0.14249707c0.7499874-0.7499874 1.18498008-1.25997891 1.69497158-1.84496923l0.25499618-0.28499502 0.62248976-0.69748858 22.4996247-26.06206553c2.03246631-2.36246045 5.13741445-5.62490596 9.05984913-9.74983711l2.41495927-2.54245781v-19.44717626a180.97198417 180.97198417 0 0 1-18.4871918 0.41999325h-28.49952481a191.80180372 191.80180372 0 0 1-20.39216044-0.93748447v23.61710654a175.497075 175.497075 0 0 1 20.39216044-0.93748447h12.9597838a33.21694599 33.21694599 0 0 0-2.56495693 2.82745284l-21.87713585 25.65707256c-2.55745722 2.90245166-5.92490127 6.59239013-11.4823081 11.99980019v20.52715781c4.40242646-0.38999356 7.59737373-0.38999356 18.2771956-0.38999355z m-212.75645449-62.11396494a8.73735469 8.73735469 0 0 1 7.43237667 3.38244345 15.86223545 15.86223545 0 0 1 2.2499622 10.49982451v27.80203711a143.84010234 143.84010234 0 0 1-1.07998243 20.39216046h28.08703213a154.7449207 154.7449207 0 0 1-1.07998154-20.2496625v-27.53954122a19.0196833 19.0196833 0 0 1 16.49972461-14.44475917c7.67987227 0 10.67232217 3.93743408 10.67232217 14.04726591v27.80203623a145.88006836 145.88006836 0 0 1-1.07998242 20.39216045h28.06453301a150.25249599 150.25249599 0 0 1-1.06498301-20.2496625v-33.48694248a32.69195508 32.69195508 0 0 0-7.34237754-23.09961445 28.71702158 28.71702158 0 0 0-21.82463613-7.81486963 36.85438565 36.85438565 0 0 0-28.34202745 11.73730429 16.82971963 16.82971963 0 0 0-5.527408-6.7498875 28.91201836 28.91201836 0 0 0-17.28721143-4.84491972 32.56445742 32.56445742 0 0 0-25.7770705 11.07731602v-1.35747774a14.99974981 14.99974981 0 0 0 0.12749765-1.88246865v-5.66990507h-26.72205468a124.36292724 124.36292724 0 0 1 1.08748212 20.37716015v41.57930654a145.91006807 145.91006807 0 0 1-1.08748212 20.39216045h27.80953681a154.68492217 154.68492217 0 0 1-1.07998243-20.39216045v-27.26204502a19.86716865 19.86716865 0 0 1 17.26471231-14.42975977z m420.93048428 0.27749531a10.40982627 10.40982627 0 0 1 8.90985146 3.74993702 15.37474394 15.37474394 0 0 1 2.15996396 9.98233417v27.68203828a151.15998076 151.15998076 0 0 1-1.07998154 20.39216045h28.08703213a172.33962802 172.33962802 0 0 1-1.07998242-20.2496625v-33.89193545a29.03951602 29.03951602 0 0 0-7.69487168-22.67962206 29.60200635 29.60200635 0 0 0-21.7496373-7.55237374 37.40187656 37.40187656 0 0 0-27.81703653 11.45980898c0-0.4799918 0-1.2524792 0.07499883-2.01746688v-0.20249649c0-0.61499003 0.05249883-1.19247979 0.05249883-1.54497393v-5.66990596h-26.87955205a129.61283994 129.61283994 0 0 1 1.09498183 20.37716104v41.57930654a146.06756542 146.06756542 0 0 1-1.09498183 20.39216045h27.95953447a167.06721533 167.06721533 0 0 1-1.07998241-20.39216045v-27.25454531a24.49459161 24.49459161 0 0 1 20.12966454-14.15226445z m-549.9883336 35.77440322h38.47435928l3.64493935 11.47480928a111.05814902 111.05814902 0 0 1 3.24744522 14.57975655h31.58947353c-1.70247128-3.64493935-3.81743613-9.04484883-6.48739159-16.49972461l-29.24951221-81.26864561a106.01073281 106.01073281 0 0 1-4.58992354-14.56475713h-35.2494123a80.04616612 80.04616612 0 0 1-4.32742852 14.56475713l-29.15201426 81.26864561a133.13778135 133.13778135 0 0 1-6.4873916 16.49972461h31.58947354a77.57120742 77.57120742 0 0 1 3.38244346-14.57975655l3.62993994-11.47480928z m332.24446319-245.79340312l-47.69920547 8.32486113a82.28862862 82.28862862 0 0 0 3.83243643 11.92480137 60.53149072 60.53149072 0 0 0 23.16711357 29.0245166 101.71330488 101.71330488 0 0 0 52.41662666 12.59229023 121.98546651 121.98546651 0 0 0 46.80672012-8.7748541 56.24906221 56.24906221 0 0 0 21.14964756-16.86721904 50.32416094 50.32416094 0 0 0 8.99984971-29.92450078 44.40676026 44.40676026 0 0 0-14.85725274-33.30694512 50.81915302 50.81915302 0 0 0-29.00951631-11.92480136 53.33911084 53.33911084 0 0 0 29.05451631-15.74973721 43.04178281 43.04178281 0 0 0 9.64483857-29.05451631 43.49927461 43.49927461 0 0 0-12.60728965-31.94196768c-12.7497876-12.32979433-33.21694599-19.12468096-57.60653993-19.12468096-27.26204589 0-48.07419873 7.56737402-61.86646846 22.49962471a64.49892539 64.49892539 0 0 0-15.07474951 28.57452363l48.59919052 6.96738429c3.40494346-14.5122583 11.61730635-20.69965459 27.44954209-20.6996546 14.87225215 0 23.40710947 6.97488398 23.40711036 19.12468096a18.33719414 18.33719414 0 0 1-7.96486729 16.20722989 43.25177901 43.25177901 0 0 1-23.99960039 5.39990946 194.29926152 194.29926152 0 0 1-23.84960185-1.35747685v38.69185518a287.56020762 287.56020762 0 0 1 27.66703886-1.34247745 65.78140342 65.78140342 0 0 1 20.93215078 2.92495078 19.59717305 19.59717305 0 0 1 12.14229727 19.35717716 20.15966425 20.15966425 0 0 1-7.70237139 16.40972724 33.35194424 33.35194424 0 0 1-20.86465254 6.09739805 34.82941992 34.82941992 0 0 1-25.87456845-9.68983857 23.63210596 23.63210596 0 0 1-6.29989453-14.39226036z m-172.34712774-3.83243643l-46.79171982 4.49992529a82.17613037 82.17613037 0 0 0 4.94241768 20.91715137 53.07661582 53.07661582 0 0 0 24.29959482 28.80701982 106.68572227 106.68572227 0 0 0 50.17416328 11.0098169c26.12956464 0 46.04173242-6.43489277 59.18151357-19.12468184a56.24906221 56.24906221 0 0 0 15.74973809-41.39931006 50.09916533 50.09916533 0 0 0-24.29959482-45.89173476 108.52319092 108.52319092 0 0 0-36.44189297-12.81728672c-26.55705762-5.40741006-26.55705762-5.40741006-31.04948233-7.43237578a15.4722419 15.4722419 0 0 1-10.58232392-14.39226035c0-10.30482862 10.0273333-17.78220352 23.84960274-17.78220351 17.09971523 0 25.17708076 5.9999001 27.89953505 20.69965547l47.69920459-5.17491388a62.36896026 62.36896026 0 0 0-11.24981191-26.99955c-12.08979844-16.7847205-33.7494375-25.65707256-62.56395791-25.65707255a84.90608526 84.90608526 0 0 0-52.73162051 15.24724541 50.42915947 50.42915947 0 0 0-19.49967509 41.24931328 50.42915947 50.42915947 0 0 0 21.82463612 43.20677988c8.48235849 5.94740127 15.93723427 8.63235615 36.2243962 13.03478262a185.72690479 185.72690479 0 0 1 33.7494375 9.22484619 16.91221817 16.91221817 0 0 1 9.43484238 15.7497372c0 12.68228847-10.34232802 20.2496625-27.65953916 20.2496625a33.07444893 33.07444893 0 0 1-26.32456054-10.58232392 29.81950312 29.81950312 0 0 1-5.85740304-16.64972227zM501.19642988 701.92683477c-7.03488252 0-11.07731513-2.80495283-11.07731514-7.69487169a9.92233477 9.92233477 0 0 1 7.82986905-8.90985146 79.49867519 79.49867519 0 0 1 23.35461152-2.69995518v3.74993702a13.66477207 13.66477207 0 0 1-4.86741885 10.39482685 25.14708106 25.14708106 0 0 1-15.23224687 5.17491387z m180.61199033-0.68248917c-11.74480401 0-18.74968769-8.99984971-18.74968769-23.99959951 0-14.88725156 7.06488223-23.77460391 18.89218477-23.7746039 11.51230781 0 18.38219326 8.99984971 18.38219414 24.03709893s-6.7498875 23.75210391-18.51719151 23.75210477z m-415.64307304-31.31197822h-25.37957725l12.56229053-40.499325 12.81728672 40.499325z" p-id="68255"></path></svg>,
    'SFTP': <svg t="1724845941712" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="58689" style={{ height: '26px', transform: 'translateY(5px)' }} ><path d="M169 656.4c11.2 0 25.8 3 44 9.2 2.2 0.8 4 1 5.2 1 1 0 4.4-1 9.8-3.2 1.8-0.8 3.6-1 5.6-1 7.2 0 15 6.4 23 19 8 12.8 12.2 24.8 12.2 36.4 0 6.8-1.8 12.4-5.4 17-3.6 4.6-8 7-13.2 7-4.4 0-7.8-1-10.6-2.8-2.8-2-8.6-7.6-18-17-13-13.4-25.8-20.2-38.4-20.2-6 0-11 1.6-14.6 4.8-3.6 3.2-5.4 7.4-5.4 12.8 0 10.4 8.4 18.2 25 23.6 22.6 7.4 37 12.6 43.2 16 27.8 14.8 41.6 36.8 41.6 65.6 0 25.6-9.4 46.4-28.4 62.6C225.2 903.8 200 912 168.8 912c-14 0-28.6-1.8-44-5.4-15.4-3.6-26.6-8-33.4-12.8-5.2-3.8-10-12.2-14.2-25-4.2-12.8-6.2-25.4-6.2-37.6 0-5.8 1-10.4 3.2-13.2 2.8-3.8 6.2-5.8 10.2-5.8 4.2 0 8 2.4 12 7 2.2 2.6 7.6 11 16.2 25.4 4 6.8 10.4 12.2 19.2 16.8 8.8 4.4 17.8 6.6 27.2 6.6 8 0 14.6-1.6 19.6-5 5-3.2 7.6-7.6 7.6-12.6 0-4.8-2-9-5.8-12.4-4-3.4-10.2-6.8-19-9.8-15.6-5.4-27.4-10.4-35.6-14.8-8.2-4.4-15.8-10.2-22.8-17-17.2-16.8-25.8-35.8-25.8-57.2 0-10.6 2.2-20.8 6.6-30.8 4.4-10 10.8-18.6 19-26 17.6-17.6 40-26 66.2-26zM405.4 698.4c-7.6 0-12.2 2-13.8 6.2-1.4 3.2-2.6 9.2-3.6 18.4-1.2 9.2-1.8 17.4-1.8 24.8 0 4.4 1.4 7.4 4 9.2 2.6 1.6 7.6 2.6 14.6 2.6 4.8 0 8.4-1 10.6-2.8 2.2-2 3.8-5.2 4.8-9.8 2.4-13 7.6-19.6 15.4-19.6 13.2 0 19.8 17.4 19.8 52.4 0 22.2-2.8 38.4-8.6 48.8-3.4 6.4-8.2 9.6-14.4 9.6-6.4 0-10.2-4.8-11-14.2-0.6-6.2-1.2-10.4-2-13-0.8-2.6-2.4-5-4.6-7.2-3.6-3.8-8.8-5.6-15.6-5.6-4.8 0-8.2 1-10 2.8-1.8 2-2.6 5.6-2.2 11 0 1 0 6.6-0.2 16.8 0 20.8 2 33.4 5.8 38 1.4 1.8 2.6 3 4 3.6 1.4 0.6 5 1.2 10.6 2.2 2.8 0.4 5.2 2 7.2 4.8s3 6 3 9.6c0 9.2-4.8 15.2-14.6 17.8-14.2 3.8-34 5.6-59.6 5.6-22.4 0-37.8-1.4-46.4-4.4-3.8-1.4-7-3.8-9.2-7.2-2.4-3.4-3.6-7.4-3.6-11.6 0-5.2 1.8-9.6 5.2-12.8 0.8-0.8 3.8-2.2 9-4.4 6-2.6 9.8-8.8 11-18.4 2-14.8 3-48.4 3-100.8 0-22.6-0.8-37.4-2.2-44-1.4-6.8-4.8-11.4-10.2-14-5.4-2.6-9-5-10.6-7-1.6-2-2.6-4.8-2.6-8.6 0-5.2 2.4-9.6 7-13.2 4.6-3.6 10.4-5.4 17.2-5.4 4.4 0 10.8 0.4 19 1 17.8 1.6 39 2.4 63.6 2.4 39.4 0 66-1.2 79.8-3.6 1.8-0.2 3.2-0.4 4.2-0.4 3.8 0 7.4 2.4 11 7.2 9.6 13.4 14.4 28.2 14.4 44.6 0 7.4-1.6 13.4-4.8 17.8-3.2 4.4-7.2 6.6-12.4 6.6-3.8 0-6.6-0.8-8.6-2.6-2-1.6-7-7.6-15-17.6-4.8-6.2-10.8-10.4-17.6-12.2-7.2-1.6-20.2-2.8-39-3.4z" p-id="58690"></path><path d="M576.4 661.4h86c9.2-0.4 17.6-1.8 25.2-4.2 3.2-1 6.2-1.4 8.6-1.4 8.8 0 17.4 7.2 25.6 21.6 8.4 14.4 12.4 29.2 12.4 44.4 0 10.4-2.8 18-8.6 22.8-4.4 3.6-9.6 5.4-15.6 5.4-5.8 0-10.8-1.8-15-5.4-4.2-3.6-8.4-9.4-12.6-17.6-3.6-7.4-6.4-12.2-8.4-14.6-2-2.2-4.6-3.4-7.6-3.4-4 0-7 1.8-8.6 5.6-1.8 3.8-2.6 9.8-2.6 18.4v100.6c0 10.4 1 17.8 3 22.4s5.6 8.2 11 10.8c5.8 2.8 9.8 5.4 12 7.8 2.2 2.4 3.2 5.8 3.2 10.2 0 8.6-5.2 15-16 19.2-10.6 4.2-26.8 6.2-48.8 6.2-27 0-47-2.4-60-7.4-11-4-16.4-10.6-16.4-19.8 0-5 2-8.8 5.8-11.6 1-0.6 4.8-2 11.6-4.4 4.2-1.4 7-3.8 8.6-7.6 1.6-3.8 2.8-10.8 3.8-21.4 0.8-9.4 1.6-24.4 2.4-45.4 0.8-21 1.2-39 1.2-54.4 0-10.8-0.8-18.4-2.2-23-1.6-4.6-4-6.8-7.6-6.8-4.2 0-8.4 3.4-12.4 10-7.2 12.2-13.2 20.4-18 24.2-5.6 4.6-11 7-16.2 7-5.8 0-10.8-2.4-14.6-7.2-3.8-4.8-5.8-11-5.8-18.6 0-7.4 1.6-15.6 4.6-24.6 3-9 7.2-17.2 12.2-24.8 8.2-12.2 16.4-18.4 24.4-18.4 2.2 0 4.6 0.4 7.6 1 5.8 1.4 10.6 2.2 14.4 2.6 4.2 1.6 8.4 1.8 13.4 1.8zM768 822v-94.6c0-12.2-0.8-20-2.2-23.2-1.6-3.2-5.6-6-12.4-8-9.8-3.2-14.6-8.6-14.6-16.2 0-5.4 2-9.6 6.2-12.4 4.2-2.8 10.2-4.4 18-4.4 2.6 0 9 0.2 19.4 0.6h9.8c18-0.2 28.6-0.2 31.8-0.4 3-0.2 14.2-1.2 33.2-3.2 6.4-0.8 12-1 17.2-1 17.8 0 33.8 4 47.6 12 24.2 14 36.4 36 36.4 66.2 0 24.4-8.4 44-25.4 58.8-16 13.8-35.4 20.6-58 20.6-5.8 0-12.8-0.4-21.2-1.2-4.4-0.4-7.2-0.6-8.4-0.6-3.2 0-4.8 2-4.8 6v1l1.2 29.4c0.2 5.8 1.2 10 2.8 12.8 1.6 2.8 5.2 5.8 10.4 8.8 7 4.2 10.6 8.8 10.6 13.6 0 7.6-5.2 13.4-15.6 17.4-10.4 4-25.2 6.2-44.4 6.2-40.2 0-60.4-7.6-60.4-22.8 0-3.6 0.8-6.4 2.6-8.2 1.8-2 5.8-4.6 12.2-8.2 4-2.2 6.2-5.4 6.8-9.6 0.6-4 1-17.2 1.2-39.4z m73.6-117.4v61.2c0 4.6 1 7.4 2.8 8.4 3.2 1.6 7.2 2.6 12 2.6 7.2 0 13.2-2.2 18.2-6.6 7-6.4 10.6-17 10.6-32 0-15.6-4.2-26.8-12.4-33.8-5.2-4.4-11.6-6.6-19-6.6-8.2-0.2-12.2 2.2-12.2 6.8z" p-id="58691"></path><path d="M597.8 999c-15.4 1.8-31.2 2.8-47.2 2.8-4.6 0-9.2 0-13.6-0.2 20.8-0.4 41-1.2 60.8-2.6zM877 305.4h-67.8v-68c0-37.6-30.4-68-68-68H514.4l-90.8-90.8H197c-37.6 0-68 30.4-68 68v408.2c0 37.6 30.4 68 68 68h566.8c23.4 0 45.2-12 57.6-32l113.2-181.4c28.6-45.2-4-104-57.6-104z m-680-150.2c0-4.6 3.8-8.6 8.6-8.6h190l90.8 90.8h246.4c4.6 0 8.6 3.8 8.6 8.6v59.6H344.4c-23.8 0-46 12.4-58.2 32.8L197 486V155.2z m566.8 399.6H231l109.4-181.4h536.8l-113.4 181.4z" p-id="58692"></path></svg>,
    'FTP': <svg t="1724845911481" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="58538" style={{ height: '26px', transform: 'translateY(5px)' }} ><path d="M272.2 712c-8.6 0-13.8 2.4-15.8 7.2-1.4 3.6-2.8 10.4-4.2 20.8-1.2 10.4-2 19.8-2 28.2 0 5 1.4 8.6 4.4 10.4 3 2 8.6 2.8 16.6 2.8 5.4 0 9.4-1 12-3.2 2.6-2.2 4.4-5.8 5.4-11 2.8-14.8 8.6-22.2 17.4-22.2 15 0 22.6 19.8 22.6 59.6 0 25.2-3.2 43.8-9.8 55.6-4 7.2-9.4 10.8-16.4 10.8-7.2 0-11.4-5.4-12.6-16.2-0.6-7-1.4-11.8-2.4-14.8s-2.6-5.6-5.2-8.2c-4-4.2-10-6.4-17.8-6.4-5.6 0-9.4 1-11.4 3.2s-2.8 6.4-2.6 12.4c0 1 0 7.4-0.2 19 0 23.6 2.2 38 6.6 43 1.4 2 3 3.4 4.6 4 1.6 0.6 5.6 1.4 12.2 2.6 3.2 0.6 6 2.4 8.2 5.6 2.2 3.2 3.4 6.8 3.4 10.8 0 10.4-5.6 17.2-16.6 20.2-16 4.2-38.6 6.4-67.6 6.4-25.4 0-43-1.6-52.6-5-4.4-1.4-7.8-4.2-10.6-8.2-2.8-4-4-8.4-4-13 0-6 2-10.8 6-14.6 1-0.8 4.4-2.6 10.2-5.2 7-3 11-10 12.4-20.8 2.2-16.8 3.4-55 3.4-114.6 0-25.8-0.8-42.4-2.4-50-1.6-7.6-5.4-13-11.6-16-6.2-3-10.2-5.6-12.2-7.8s-2.8-5.4-2.8-9.6c0-6 2.6-11 8-15s11.8-6 19.6-6c5 0 12.2 0.4 21.6 1.2 20.2 1.8 44.2 2.6 72.2 2.6 44.8 0 75-1.4 90.6-4 2-0.2 3.8-0.4 4.8-0.4 4.4 0 8.4 2.8 12.4 8.2 10.8 15.2 16.4 32.2 16.4 50.6 0 8.4-1.8 15.2-5.4 20.2-3.6 5-8.2 7.6-14 7.6-4.4 0-7.6-1-9.8-2.8-2.2-2-8-8.6-17-20-5.6-7-12.2-11.8-20.2-13.8-7.8-2-22.4-3.4-43.8-4.2z" p-id="58539"></path><path d="M466.4 670H564c10.6-0.4 20-2 28.8-4.6 3.8-1 7-1.6 9.8-1.6 10 0 19.8 8.2 29.2 24.6 9.4 16.4 14.2 33.2 14.2 50.4 0 11.8-3.2 20.4-9.8 26-5 4-10.8 6.2-17.8 6.2-6.6 0-12.2-2-17-6-4.8-4-9.6-10.6-14.2-20-4-8.4-7.2-14-9.6-16.6-2.4-2.6-5.2-3.8-8.6-3.8-4.6 0-7.8 2.2-9.8 6.4-2 4.2-3 11.2-3 20.8v114.4c0 11.8 1.2 20.2 3.4 25.6 2.2 5.4 6.4 9.4 12.6 12.2 6.6 3.2 11.2 6 13.6 8.8 2.4 2.8 3.6 6.6 3.6 11.6 0 9.8-6 17-18 21.8s-30.6 7.2-55.6 7.2c-30.6 0-53.4-2.8-68.2-8.4-12.4-4.6-18.8-12.2-18.8-22.4 0-5.6 2.2-10 6.6-13 1.2-0.6 5.4-2.4 13.2-5 4.6-1.4 8-4.4 9.8-8.6 1.8-4.2 3.2-12.4 4.4-24.4 1-10.6 2-27.8 2.8-51.6 0.8-23.8 1.2-44.4 1.2-61.8 0-12.2-0.8-21-2.6-26.2-1.8-5.2-4.6-7.8-8.6-7.8-4.8 0-9.6 3.8-14 11.4-8.2 13.8-15 23-20.4 27.6-6.4 5.4-12.4 8-18.4 8-6.6 0-12.2-2.8-16.4-8.2-4.4-5.6-6.4-12.6-6.4-21.2 0-8.4 1.8-17.8 5.2-27.8 3.4-10.2 8-19.6 13.8-28 9.4-13.8 18.6-20.8 27.8-20.8 2.4 0 5.4 0.4 8.6 1.2 6.6 1.6 12.2 2.6 16.4 3 4.2 0.4 9 0.6 14.6 0.6zM684.2 852.6v-107.4c0-13.8-0.8-22.8-2.6-26.4-1.8-3.8-6.4-6.8-14-9-11.2-3.6-16.6-9.6-16.6-18.4 0-6.2 2.4-10.8 7-14 4.6-3.2 11.4-5 20.4-5 3 0 10.4 0.2 22 0.6h11.2c20.6-0.2 32.6-0.4 36-0.6 3.6-0.2 16-1.4 37.8-3.6 7.2-0.8 13.8-1.2 19.6-1.2 20.2 0 38.2 4.6 54.2 13.6 27.6 15.8 41.4 40.8 41.4 75.2 0 27.8-9.6 50-29 66.8-18.2 15.6-40.2 23.4-66 23.4-6.6 0-14.6-0.4-24-1.4-5-0.4-8.2-0.6-9.4-0.6-3.6 0-5.4 2.2-5.4 6.8v1.2l1.2 33.4c0.2 6.6 1.4 11.4 3.2 14.6 2 3.2 5.8 6.6 11.8 10 8 4.8 12 10 12 15.6 0 8.6-6 15.2-17.8 19.8-11.8 4.6-28.6 7-50.4 7-45.8 0-68.6-8.6-68.6-26 0-4 1-7.2 3-9.4s6.6-5.4 13.8-9.4c4.4-2.6 7-6.2 7.8-10.8 0.6-4.6 1.2-19.6 1.4-44.8z m83.6-133.4v69.4c0 5.4 1 8.6 3.2 9.6 3.6 2 8 2.8 13.6 2.8 8.2 0 15-2.6 20.6-7.6 8-7.2 12-19.4 12-36.4 0-17.6-4.6-30.4-14-38.4-6-5-13-7.6-21.4-7.6-9.4 0.2-14 3-14 8.2z" p-id="58540"></path><path d="M597.8 999c-15.4 1.8-31.2 2.8-47.2 2.8-4.6 0-9.2 0-13.6-0.2 20.8-0.4 41-1.2 60.8-2.6zM877 305.4h-67.8v-68c0-37.6-30.4-68-68-68H514.4l-90.8-90.8H197c-37.6 0-68 30.4-68 68v408.2c0 37.6 30.4 68 68 68h566.8c23.4 0 45.2-12 57.6-32l113.2-181.4c28.6-45.2-4-104-57.6-104z m-680-150.2c0-4.6 3.8-8.6 8.6-8.6h190l90.8 90.8h246.4c4.6 0 8.6 3.8 8.6 8.6v59.6H344.4c-23.8 0-46 12.4-58.2 32.8L197 486V155.2z m566.8 399.6H231l109.4-181.4h536.8l-113.4 181.4z" p-id="58541"></path></svg>,
    'API': <svg t="1724845990530" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="66236" style={{ height: '26px', transform: 'translateY(5px)' }} ><path d="M515.582746 1022.720448c168.644974 0 322.8566-76.030989 425.630229-194.184835H93.151397c104.411456 118.153846 255.39861 194.184835 422.431349 194.184835z m0-1022.720448c-168.644974 0-319.632129 72.832109-422.431349 194.184835h848.061578C838.439346 72.832109 687.452192 0 515.582746 0z m-78.692458 746.030089h-109.222572l-30.504523-100.34248H139.727096l-30.504524 100.34248H0l160.609387-449.864947h120.45704l155.823861 449.864947z m-163.833858-176.39906l-48.187934-152.11316a136.169941 136.169941 0 0 1-6.397761-42.071675H215.220673c0 14.535713-3.19888 27.48478-6.423352 37.209377l-48.187934 152.11316h112.447043v4.862298z m322.831009 21.010247v155.363222h-99.574748V297.751787h157.410506c112.421452 0 168.644974 48.546209 168.644974 142.414155 0 45.321737-17.65782 82.531114-48.187934 110.015894-30.504523 27.535962-77.105813 42.097266-131.691508 42.097266l-46.60129-1.637826z m0-213.582846v142.388564h41.764583c54.611286 0 78.666867-24.260309 78.666866-69.582047s-27.254461-69.582046-78.666866-69.582046h-41.764583v-3.224471z m427.242466-79.306643v79.306643h-36.927876v294.527315h36.927876V747.616734h-175.042736v-79.281051h36.927876V373.833958H848.087169v-76.082171h175.042736z m0 0" p-id="66237"></path></svg>,
  }

  /**
   * @en-US International configuration
   * @zh-CN 国际化配置
   * */
  const intl = useIntl();

  const columns: ProColumns<API.RuleListItem>[] = [
    {
      title: '名称',
      dataIndex: 'name',

      render: (dom, entity) => {
        return (
          <a
            onClick={() => {
              setCurrentRow(entity);
              setShowDetail(true);
            }}
          >
            {dom}
          </a>
        );
      },
    },
    {
      title: '类型',
      dataIndex: '**type',
      render: (dom, entity) => dict_type[entity.type] ?? <Tag>{entity?.type ?? '-'}</Tag>,
      valueType: 'select',
      valueEnum: dict_type
    },
    {
      title: '状态',
      dataIndex: '**state',
      render: (dom, entity) => dict_state[entity.state] ?? <Tag>{entity?.state ?? '-'}</Tag>,
      valueType: 'select',
      valueEnum: dict_state
    },
    {
      title: '最后检测时间',
      dataIndex: 'lastCheckTime',
      valueType: 'dateTime',
      search: false,
    },
    {
      title: '更新时间',
      dataIndex: 'lastModifiedDate',
      valueType: 'dateTime',
      search: false,
    },
    {
      title: <FormattedMessage id="pages.searchTable.titleOption" defaultMessage="Operating" />,
      dataIndex: 'option',
      valueType: 'option',
      render: (_, record) => [
        <Button
          type="link"
          key="edit"
          onClick={() => {
            setCurrentRow(record);
            handleModalOpen(true);
          }}
        >
          <EditOutlined /> 更新
        </Button>,
      ],
    },
  ];

  const detail_columns: ProColumns<API.RuleListItem>[] = []

  const onSelect = (...args: any) => {
    _params(args[0][0] ? { '**catalogId': args[0][0] } : {})
  }

  return (
    <PageContainer>
      <Layout style={{ minHeight: '100%' }}>
        <Layout.Sider width="25%" style={{ backgroundColor: 'rgba(255, 255, 255)', marginRight: '16px', borderRadius: '6px', padding: '16px', paddingTop: '23px' }} >
          <SearchTree treeData={catalogsTree} onSelect={onSelect} />
        </Layout.Sider>
        <Layout.Content >
          <ProTable<API.RuleListItem, API.PageParams>
            headerTitle={intl.formatMessage({
              id: 'pages.searchTable.title',
              defaultMessage: 'Enquiry form',
            })}
            actionRef={actionRef}
            rowKey="id"
            search={{
              labelWidth: 120,
              defaultCollapsed: false,
            }}
            toolBarRender={() => [
              <Button
                key="primary"
                onClick={() => {
                  handleModalOpen(true);
                }}
              >
                <PlusOutlined />新建
              </Button>,
            ]}
            params={params}
            request={dataSources.get}
            columns={columns}
            rowSelection={{
              onChange: (_, selectedRows) => {
                setSelectedRows(selectedRows);
              },
            }}
          />
        </Layout.Content>
      </Layout>

      {selectedRowsState?.length > 0 && (
        <FooterToolbar
          extra={
            <div>
              <FormattedMessage id="pages.searchTable.chosen" defaultMessage="Chosen" />{' '}
              <a style={{ fontWeight: 600 }}>{selectedRowsState.length}</a>{' '}
              <FormattedMessage id="pages.searchTable.item" defaultMessage="项" />
            </div>
          }
        >
          <Button
            danger
            onClick={async () => {
              await handleRemove(selectedRowsState);
              setSelectedRows([]);
              actionRef.current?.reloadAndRest?.();
            }}
          >
            <DeleteOutlined />
            <FormattedMessage
              id="pages.searchTable.batchDeletion"
              defaultMessage="Batch deletion"
            />
          </Button>
        </FooterToolbar>
      )}
      <StepsForm
        stepsProps={{
          size: 'small',
        }}
        stepsFormRender={(dom, submitter) => {
          return (
            <Modal
              width={640}
              styles={{
                body: {
                  padding: '32px 40px 48px',
                },
              }}
              destroyOnClose
              title={(currentRow?.id ? '编辑' : '新建') + '数据源'}
              open={createModalOpen}
              footer={submitter}
              onCancel={() => {
                handleModalOpen(false)
              }}
            >
              {dom}
            </Modal>
          );
        }}
        onFinish={async (value) => {
          let success;
          const { id } = currentRow;
          if (id) {
            success = await handleUpdate({ id, ...value } as API.RuleListItem);
          } else {
            success = await handleAdd(value as API.RuleListItem);
          }
          if (success) {
            handleModalOpen(false);
            if (actionRef.current) {
              actionRef.current.reload();
            }
          }
        }}
      >
        <StepsForm.StepForm
          initialValues={currentRow}
          title={'选择类型'}
        >
        </StepsForm.StepForm>
        <StepsForm.StepForm
          initialValues={currentRow}
          title={'数据源参数'}
        >
        </StepsForm.StepForm>
      </StepsForm>
      <Drawer
        width={document.body.clientWidth <= 500 ? 380 : document.body.clientWidth * 0.3}
        open={showDetail}
        onClose={() => {
          setCurrentRow(undefined);
          setShowDetail(false);
        }}
        closable={false}
      >
        {currentRow?.name && (
          <ProDescriptions<API.RuleListItem>
            column={1}
            title={currentRow?.name}
            request={async () => ({
              data: currentRow || {},
            })}
            params={{
              id: currentRow?.name,
            }}
            columns={[...columns, ...detail_columns] as ProDescriptionsItemProps<API.RuleListItem>[]}
          />
        )}
      </Drawer>
    </PageContainer>
  );
};

export default TableList;
